{% extends "layout.html" %}

{% block pageTitle %}
  Do you want to update the call details you have added?
{% endblock %}

{% block header %}
  {% include "/prototype-dev-baseline/mvp-1_3/common/non-telephony/header_keydetail_bar.html" %}
{% endblock %}


{% block footer %}
  {% include "/prototype-sprint-wise/ur-8/common/footer.html" %}
{% endblock %}

{% block beforeContent %}
  {% include "/prototype-sprint-wise/ur-8/common/phase-banner.html" %}
  <a class="govuk-back-link" href="javascript:window.history.back()">Back</a>
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
  {% set checkNoteAdded =  data['addNote'] %}
  {% if checkNoteAdded =='' %}
  <!-- Ask to complete session -->
  <form class="form" action="add-more-contact-details" method="post">
    <div class="govuk-form-group">
      <fieldset class="govuk-fieldset">
        <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
          
          <!-- ------------------------------ for Phone call ------------------------------ -->
        {% if data['contact-types']== 'A phone call' %}
        <h1 class="govuk-fieldset__heading">
          Do you want to update the call details you have added?
        </h1>
        {%endif%}
        <!-- ------------------------------ for letter ------------------------------ -->
        {% if data['contact-types']== 'A letter' %}
        <h1 class="govuk-fieldset__heading">
          Do you want to update the letter details you have added?
        </h1>
        {%endif%}
        <!-- ------------------------------ for Email ------------------------------ -->
        {% if data['contact-types']== 'An email' %}
        <h1 class="govuk-fieldset__heading">
          Do you want to update the email details you have added?
        </h1>
        {%endif%}
        <!-- ------------------------------ for text message ------------------------------ -->
        {% if data['contact-types']== 'Text message to' %}
        <h1 class="govuk-fieldset__heading">
          Do you want to update the text message you have added?
        </h1>
        {%endif%}
        <!-- ------------------------------ for A visit or appointment ------------------------------ -->
        {% if data['contact-types']== 'A visit or appointment' %}
        <h1 class="govuk-fieldset__heading">
          Do you want to update the visit details you have added?
        </h1>
        {%endif%}
        </legend>
        <div class="govuk-radios" data-module="govuk-radios">
          <div class="govuk-radios__item">
            <input class="govuk-radios__input" id="do-you-want-to-add-more-detail-1" name="do-you-want-to-add-more-detail" type="radio" value="Yes I want to add">
            <label class="govuk-label govuk-radios__label" for="do-you-want-to-add-more-detail-1">
              Add another benefit or query
            </label>
          </div>
          <div class="govuk-radios__item">
            <input class="govuk-radios__input" id="do-you-want-to-add-more-detail-2" name="do-you-want-to-add-more-detail" type="radio" value="Add a note">
            <label class="govuk-label govuk-radios__label" for="do-you-want-to-add-more-detail-2">
              Add a note
            </label>
          </div>
          <div class="govuk-radios__divider">or</div>
          <div class="govuk-radios__item">
            <input class="govuk-radios__input" id="do-you-want-to-add-more-detail-3" name="do-you-want-to-add-more-detail" type="radio" value="Complete phone call">
            <label class="govuk-label govuk-radios__label" for="do-you-want-to-add-more-detail-3">
              Start Service again
            </label>
          </div>
        </div>
      </fieldset>
    </div>
    <button class="govuk-button" data-module="govuk-button">
      Save and continue
    </button>
  </form>
  {%else%} 
  <form class="form" action="add-more-contact-details" method="post">
    <div class="govuk-form-group">
      <fieldset class="govuk-fieldset">
        <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
          <!-- ------------------------------ for Phone call ------------------------------ -->
          {% if data['contact-types']== 'A phone call' %}
          <h1 class="govuk-fieldset__heading">
            Do you want to update the call details you have added?
          </h1>
          {%endif%}
          <!-- ------------------------------ for letter ------------------------------ -->
          {% if data['contact-types']== 'A letter' %}
          <h1 class="govuk-fieldset__heading">
            Do you want to update the letter details you have added?
          </h1>
          {%endif%}
          <!-- ------------------------------ for Email ------------------------------ -->
          {% if data['contact-types']== 'An email' %}
          <h1 class="govuk-fieldset__heading">
            Do you want to update the email details you have added?
          </h1>
          {%endif%}
          <!-- ------------------------------ for text message ------------------------------ -->
          {% if data['contact-types']== 'Text message to' %}
          <h1 class="govuk-fieldset__heading">
            Do you want to update the notification details you have added?
          </h1>
          {%endif%}
          <!-- ------------------------------ for A visit or appointment ------------------------------ -->
          {% if data['contact-types']== 'A visit or appointment' %}
          <h1 class="govuk-fieldset__heading">
            Do you want to update the visit details you have added?
          </h1>
          {%endif%}
        </legend>
        <div class="govuk-radios" data-module="govuk-radios">
          <div class="govuk-radios__item">
            <input class="govuk-radios__input" id="do-you-want-to-add-more-detail-1" name="do-you-want-to-add-more-call-detail" type="radio" value="Yes I want to add">
            <label class="govuk-label govuk-radios__label" for="do-you-want-to-add-more-detail-1">
              Add another benefit or query
            </label>
          </div>
          <div class="govuk-radios__item">
            <input class="govuk-radios__input" id="do-you-want-to-add-more-detail-2" name="do-you-want-to-add-more-call-detail" type="radio" value="Change your note">
            <label class="govuk-label govuk-radios__label" for="do-you-want-to-add-more-detail-2">
              Change your note
            </label>
          </div>
          <div class="govuk-radios__divider">or</div>
          <div class="govuk-radios__item">
            <input class="govuk-radios__input" id="do-you-want-to-add-more-detail-3" name="do-you-want-to-add-more-call-detail" type="radio" value="Complete phone call">
            <label class="govuk-label govuk-radios__label" for="do-you-want-to-add-more-detail-3">
              Start Service again
            </label>
          </div>
        </div>
      </fieldset>
    </div>
    <button class="govuk-button" data-module="govuk-button">
      Save and continue
    </button>
  </form>
  {%endif%}
  </div>
</div>

  <!-- Added details summary -->
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">
      <div class="govuk-!-width-two-thirds">
        {% if (data['What-type-of-contact']== 'Inbound phone call with') or (data['What-type-of-contact']== 'What-type-of-contact') %}
        <h2 class="govuk-heading-m">You have added details about this call</h2>
        {%endif%}
        {% if (data['What-type-of-contact']== 'Inbound letter from') or (data['What-type-of-contact']== 'Outbound letter to') %}
        <h2 class="govuk-heading-m">You have added details about this letter</h2>
        {%endif%}
        {% if (data['What-type-of-contact']== 'Inbound email from') or (data['What-type-of-contact']== 'Outbound email to') %}
        <h2 class="govuk-heading-m">You have added details about this email</h2>
        {%endif%}
        {% if (data['What-type-of-contact']== '') and (data['contact-types']== 'Text message to') %} 
        <h2 class="govuk-heading-m">You have added details about this notification</h2>
        {%endif%}
        {% if (data['What-type-of-contact']== 'Visit from') or (data['What-type-of-contact'] == 'Visit to') %}
        <h2 class="govuk-heading-m">You have added details about this visit</h2>
        {%endif%}

        {% set benefits =  data['what-benefit-discussed-non-telephony'] %}
        {% set questionESA = data['questionAsk-esa'] %}
        {% set questionPIP = data['questionAsk-pip'] %}
        {% set benefitLength =  data['what-benefit-discussed-non-telephony'] | length %}
        {% if benefitLength >1 %}
        <table class="govuk-summary-list govuk-!-margin-bottom-0">
          <tbody class="govuk-summary-list">
            {% for benefitsName in data['what-benefit-discussed-non-telephony'] %}
            <!-- for ESA -->
            {% if benefitsName == 'Employment and Support Allowance' %}
            <tr class="govuk-summary-list__row">
              <th scope="row" class="govuk-summary-list__key">
                Employment and Support Allowance
              </th>
              <td class="govuk-summary-list__value">
                {%if data['contact-type-esa'] | length > 1 %}
                  <ul class="govuk-list govuk-list--bullet">
                    {% for questionsESA in data['contact-type-esa'] %}
                    <li>{{ questionsESA or "No inquiry selected"}}</li>
                    {% endfor %}
                  </ul>
                {%else%}
                <p>{{data['contact-type-esa']}}</p>
                {%endif%}
              </td>
            </tr>
            {%endif%}
            {% if benefitsName == 'Personal Independence Payment' or benefitsName == 'Attendance Allowance' or benefitsName == 'dla' %}
            <!-- for pip -->
            <tr class="govuk-summary-list__row">
              <th scope="row" class="govuk-summary-list__key">
                Personal Independence Payment
              </th>
              <td class="govuk-summary-list__value">
                {%if data['contact-type-pip'] | length > 1 %}
                  <ul class="govuk-list govuk-list--bullet">
                    {% for questionsPIP in data['contact-type-pip'] %}
                    <li>{{ questionsPIP }}</li>
                    {% endfor %}
                  </ul>
                {%else%}
                  <p>{{data['contact-type-pip']}}</p>
                  {%endif%}
              </td>
            </tr>
            {%endif%}

            {% if benefitsName == 'General change of circumstance' %}
            <!-- for General CoC -->
            <tr class="govuk-summary-list__row">
              <th scope="row" class="govuk-summary-list__key">
                General change of circumstance
              </th>
              <td class="govuk-summary-list__value">
                {%if data['contact-type-gCoC'] | length > 1 %}
                  <ul class="govuk-list govuk-list--bullet">
                    {% for questionsgCoC in data['contact-type-gCoC'] %}
                    <li>{{ questionsgCoC }}</li>
                    {% endfor %}
                  </ul>
                {%else%}
                  <p>{{data['contact-type-gCoC']}}</p>
                {%endif%}
              </td>
            </tr>
            {%endif%}
          {% endfor %}
            <tr class="govuk-summary-list__row">
              <th scope="row" class="govuk-summary-list__key">
              Notes
              </th>
              <td class="govuk-summary-list__value">
                {{ data['addNote'] or "Not provided" }}
              </td>
            </tr>
          </tbody>
        </table>
        {%else%}
        {%if benefitLength == 1 and benefits != 'General information' %}
        <table class="govuk-summary-list govuk-!-margin-bottom-0">
          <tbody class="govuk-summary-list">
            <tr class="govuk-summary-list__row">
              <th scope="row" class="govuk-summary-list__key govuk-!-width-one-third">
                {{ data['what-benefit-discussed-non-telephony'] }}
              </th>
              <td class="govuk-summary-list__value">
                {%if data['contact-type'] | length > 1 %}
                  <ul class="govuk-list govuk-list--bullet">
                    {% for contactTopics in data['contact-type'] %}
                    <li>{{ contactTopics }}</li>
                    {% endfor %}
                  </ul>
                {%else%}
                  <p>{{data['contact-type']}}</p>
                {%endif%}
              </td>
            </tr>
            <tr class="govuk-summary-list__row">
              <th scope="row" class="govuk-summary-list__key">
              Notes added
              </th>
              <td class="govuk-summary-list__value">
                {{ data['addNote'] or "Not provided" }}
              </td>
            </tr>
          </tbody>
        </table>
        {%else%}

        <table class="govuk-summary-list govuk-!-margin-bottom-0">
          <tbody class="govuk-summary-list">
            <tr class="govuk-summary-list__row">
              <th scope="row" class="govuk-summary-list__key govuk-!-width-one-third">
                {{ data['what-benefit-discussed-non-telephony'] }}
              </th>
              <td class="govuk-summary-list__value">
                {{data['noBenefitReason']}}
              </td>
            </tr>
            <tr class="govuk-summary-list__row">
              <th scope="row" class="govuk-summary-list__key">
              Notes added
              </th>
              <td class="govuk-summary-list__value">
                {{ data['addNote'] or "Not provided" }}
              </td>
            </tr>
          </tbody>
        </table>
        {%endif%}
        {%endif%}
      </div>
    </div>
  </div>

{% endblock %}


